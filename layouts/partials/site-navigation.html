{{/*
Dynamic Site Navigation Component

Automatically configures navigation based on:
- data/site_config.yaml for language settings
- data/{lang}/menu.yaml for menu items per language

Features:
- Supports single or multi-language setup
- Hides language switcher when only one language is supported
- Uses data files instead of hugo.toml for menu configuration
*/}}

<nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l center items-center justify-between">
    <div class="flex items-center">
      <a href="{{ .Site.Home.RelPermalink }}" class="mr2" title="IOGKF Affiliated Dojo">
        <img src="{{ .Site.BaseURL }}images/logo-iogkf.png" alt="IOGKF" style="height: 24px;" />
      </a>
      <a href="{{ .Site.Home.RelPermalink }}" class="f3 fw2 hover-white white-90 dib no-underline">
        {{ with .Site.Params.site_logo }}
          <img src="{{ urls.RelURL . }}" class="w100 mw5-ns" alt="{{ $.Site.Title }}" />
        {{ else }}
          {{ .Site.Title }}
        {{ end }}
      </a>
    </div>
    <div class="flex-l items-center">
      {{/* Dynamic menu from data files */}}
      {{ $currentLang := .Site.Language.Lang }}
      {{ $menuData := index .Site.Data $currentLang "menu" }}
      {{ if $menuData }}
        <ul class="{{ if eq $.Site.Language.LanguageDirection "rtl" }}pr0 ml3{{ else }}pl0 mr3{{ end }}">
          {{ range sort $menuData.menu "weight" }}
          <li class="list f5 f4-ns fw4 dib {{ if eq $.Site.Language.LanguageDirection "rtl" }}pl3{{ else }}pr3{{ end }}">
            <a class="hover-white white-90 no-underline" href="{{ .url | relLangURL }}" title="{{ .name }}">
              {{ .name }}
            </a>
          </li>
          {{ end }}
        </ul>
      {{ end }}
      
      {{/* Dynamic language switcher */}}
      {{ partial "i18nlist.html" . }}
      {{ partial "social/follow.html" . }}
    </div>
  </div>
</nav>
